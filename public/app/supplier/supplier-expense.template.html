<div class="panel">
	<div class="bar">
		<div>
			<h3 class="title">{{$ctrl.supplier.name}}</h3>
			<a href="#/supplier/{{$ctrl.supplier._id}}">back to supplier</a>
		</div>
		<div>
            <h3>{{$ctrl.expense.amount = ($ctrl.expense.items | totalSumPriceQty:'quantity':'cost') | number}} F.CFA</h3>
		</div>
	</div>
	<div class="main">
		<form name="form" novalidate>
            <table class="table">
                <thead>
                    <tr>
                        <th><input type="checkbox" ng-model="selectedAll" ng-click="checkAll()" /></th>
                        <th>Product / Service</th>
                        <th>Description</th>
                        <th>Quantity</th>
                        <th>Price ( F.CFA )</th>
                        <th>Total ( F.CFA )</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in $ctrl.expense.items">
                        <td>
                            <input type="checkbox" ng-model="item.selected"/>
                        </td>
                        <td>
                            <input type="text" class="form-control" ng-model="item.item_name"/>
                        </td>
                        <td>
                            <input type="text" class="form-control" ng-model="item.description"/>
                        </td>
                        <td>
                            <input type="number" class="form-control" ng-model="item.quantity"/>
                        </td>
                        <td>
                            <input type="number" class="form-control" ng-model="item.cost"/>
                        </td>
                        <td>
                            {{item.quantity * item.cost | number}}
                        </td>
                    </tr>
                    <tr ng-show="$ctrl.showAddItem==true">
                        <td></td>
                        <td>
                            <div class="dropdown">
                            	<angucomplete-alt id="ex2"
		                        placeholder="Search product or service"
		                        pause="300"
		                        selected-object="$ctrl.setItem"
		                        local-data="$ctrl.items"
		                        search-fields="name"
		                        title-field="name"
		                        minlength="1"
		                        input-class="form-control"
		                        match-class="highlight" />
                                <!--  -->
                            </div>
                        </td>
                        <td colspan="4"></td>
                    </tr>
                </tbody>
            </table>
			<div class="bar" ng-show="$ctrl.expense.status == 0">
				<div>
                    <button class="btn btn-secondary" ng-click="$ctrl.showAddItem=true">Add line</button>
                    <button class="btn btn-secondary" ng-click="$ctrl.clear_items()">Clear all</button>
                    <button class="btn btn-light" ng-click="$ctrl.remove()">Remove selection</button>
				</div>
			</div>
		</form>
		<div class="bar footer" ng-show="$ctrl.expense.status == 0">
			<div>
				<a role="button" class="btn btn-light" href="#/supplier/{{$ctrl.supplier._id}}">Annuler</a>
			</div>
			<div>
				<button ng-disabled="$ctrl.expense.items.length==0" class="btn btn-success" ng-click="$ctrl.save()">Save and close</button>
			</div>
		</div>
	</div>
</div>